<div class="container mt-2">
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center text-white bg-primary">
      <h5 class="mb-0">Sale Invoice</h5>
    </div>


    <!-- Form Section -->
    <div class="card-body">
      <form [formGroup]="invoiceForm" class="row g-3 align-items-end">

        <div class="col-md-3">
          <label class="form-label">Sale Reference No</label>
          <input type="text" class="form-control" formControlName="invoiceNo" placeholder="Enter Reference No">
        </div>

        <div class="col-md-3">
          <label class="form-label">Customer Name</label>
          <input type="text" class="form-control" formControlName="customerName" placeholder="Enter Customer Name">
        </div>

        <div class="col-md-3">
          <label class="form-label">Part</label>
          <input type="text" class="form-control" formControlName="product" placeholder="Enter Part Name">
        </div>

        <div class="col-md-3">
          <label class="form-label">Make</label>
          <select class="form-select" formControlName="make">
            <option value="">Select Make</option>
          </select>
        </div>

        <div class="col-md-3">
          <label class="form-label">Quantity</label>
          <input type="number" class="form-control" formControlName="quantity">
        </div>

        <div class="col-md-3">
          <label class="form-label">Unit Price</label>
          <input type="number" class="form-control" formControlName="unitPrice">
        </div>

        <div class="col-md-3">
          <label class="form-label">Total</label>
          <input type="number" class="form-control" formControlName="total" readonly>
        </div>

        <!-- Add Button -->
        <div class="col-md-1 d-flex justify-content-center">
          <button type="button" class="btn btn-outline-primary" (click)="addToTable()">
            <i class="bi bi-plus-lg"></i>
          </button>
        </div>

        <!-- Excel Upload -->
        <div class="col-md-4">
          <label class="form-label">Upload Excel</label>
          <input type="file" class="form-control" (change)="onExcelUpload($event)">
        </div>

        <!-- Submit -->
        <div class="col-12 text-center mt-3">
          <button type="submit" class="btn btn-primary px-4" (click)="submitInvoice()">
            Submit
          </button>
        </div>

      </form>
    </div>
  </div>

<!-- Table Section -->
<div class="table-responsive mt-4">
  <table class="table table-bordered table-striped text-center align-middle">
    <thead class="table-primary">
      <tr>
        <th>No</th>
        <th>Doc No</th>
        <th>Make</th>
        <th>Part</th>
        <th>Qty</th>
        <th>Unit Price</th>
        <th>Discount</th>
        <th>VAT</th>
        <th>Total</th>
        <th>Action</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngIf="invoiceList.length === 0">
        <td colspan="10" class="text-muted">No data available</td>
      </tr>

      <tr *ngFor="let inv of invoiceList; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ inv.DOCNO }}</td>
        <td>{{ inv.MAKE }}</td>
        <td>{{ inv.PART }}</td>
        <td>{{ inv.QTY }}</td>
        <td>{{ inv.PRICE }}</td>
        <td>{{ inv.DISCOUNT }}</td>
        <td>{{ inv.VATVALUE }}</td>
        <td>{{ inv.TOTALVALUE }}</td>
        <td>
          <button class="btn btn-sm btn-danger" (click)="deleteInvoice(i)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
</div>
